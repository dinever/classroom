<%= render 'organizations/organization_invitation_banner' %>

<div class="site-content">
  <div class="site-content-cap">
    <h2 class="site-content-heading">
      <span class="assignment-icon assignment-icon-individual">
        <%= octicon('person') %>
      </span>
      Accept the <strong><%= assignment.title %></strong> assignment
    </h2>
  </div>
</div>

<div class="site-content-body">
  <% if github_repository.present? %>
    <div class="markdown-body">
      <p>
        The <strong><%= link_to "#{github_repository.name}", github_repository.html_url %></strong> repository already exists in the <%= link_to "@#{decorated_organization.login}", decorated_organization.github_url %> organization on GitHub.
      </p>
    </div>
    <div class="form-actions">
      <p>
        <label>Add yourself as a collaborator on the repository.</label>
      </p>
      <%= form_tag({ controller: :assignment_invitations, action: :accept_invitation}, method: :patch) do %>
          <%= submit_tag 'Join as a collaborator', class: 'btn btn-green js-navigation' %>
      <% end %>
    </div>
    <div class="form-actions">
      <p>
        <label>Or create a new repository.</label>
      </p>
      <%= form_tag({ controller: :assignment_invitations, action: :create_new_repo}, method: :patch) do %>
          <%= text_field_tag 'repo_suffix', nil, placeholder: 'Create a new repository', class: 'textfield' %>
          <%= submit_tag 'Create a new repository', class: 'btn btn-green js-navigation' %>
      <% end %>
    </div>
  <% else %>
    <%= form_tag({ controller: :assignment_invitations, action: :accept_invitation}, method: :patch) do %>
    <div class="markdown-body">
      <p>
        Accepting this assignment will give you access to the <strong><%= "#{assignment.slug}-#{decorated_current_user.login}" %></strong>
        repository in the <%= link_to "@#{decorated_organization.login}", decorated_organization.github_url %> organization on GitHub.
      </p>
    </div>
    <div class="form-actions">
      <%= submit_tag 'Accept this assignment', class: 'btn btn-green js-navigation' %>
    </div>
    <% end %>
  <% end %>
</div>
